
<!DOCTYPE html> 

<html>
    <head>
        <title>My Leaflt Map </title>
        
        <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.2/dist/leaflet.css" />
        <link rel="stylesheet" href="https://unpkg.com/leaflet-routing-machine@latest/dist/leaflet-routing-machine.css" />
        <!-- integrity="sha256-sA+zWATbFveLLNqWO2gtiw3HL/lh1giY/Inf1BJ0z14="
        crossorigin="" -->
        
        <style>
            body {
                margin: 0;
                padding: 0;
            }
        </style>

        <!-- Make sure you put this AFTER Leaflet's CSS -->
        <script src="https://unpkg.com/leaflet@1.9.2/dist/leaflet.js"
        ></script>
<!-- integrity="sha256-o9N1jGDZrf5tS+Ft4gbIK7mYMipq9lqpVJ91xHSyKhg="
        crossorigin="" -->

    </head>

    <body>
        <h1> HEllo </h1>
        <div id="map" style="width:100%; height: 100vh"></div>
        
        
        <!--  no idea what this below code does :) -->
        <script src="https://unpkg.com/leaflet@1.8.0/dist/leaflet.js"></script>
        <script src="https://unpkg.com/leaflet-routing-machine@latest/dist/leaflet-routing-machine.js"></script>


        <script>
            var map = L.map('map').setView([22.710903, 75.860988], 9);
            mapLink = "<a href='http://openstreetmap.org'>OpenStreetMap</a>";
            
            L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', 
                { maxZoom: 19,
                  attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
                }).addTo(map);
                
            // marker.on('click', function(ev){
            //     var latlng = map.mouseEventToLatLng(ev.originalEvent);
            //     console.log(latlng.lat + ', ' + latlng.lng);
            // });
        //     var popup = L.popup()
		// .setLatLng([51.513, -0.09])
		// .setContent("I am a standalone popup.")
		// .openOn(map);
            

            map.on('click', 
                function(e){
                    var newMarker = L.marker([e.latlng.lat, e.latlng.lng]).addTo(map);
                    
                    var coord = e.latlng.toString().split(',');
                    var lat = coord[0].split('(');
                    var lng = coord[1].split(')');

                    let popup_content = `Hello Sekhar and Sai! <br> My Location :  ${lat} , ${lng}`
                    newMarker.bindPopup(popup_content).openPopup();

                    console.log("You clicked the map at latitude: " + lat[1] + " and longitude:" + lng[0]);
			}).on('routesfound', function (e) {
				var routes = e.routes;
				console.log(routes);
                
				e.routes[0].coordinates.forEach(function (coord, index) {
					setTimeout(function () {
						marker.setLatLng([coord.lat, coord.lng]);
					}, 100 * index)
				})

			}).addTo(map);
        </script>  <!-- script means javascript code? -->
        
        <p> BYE BYE </p>
    </body>
</html>